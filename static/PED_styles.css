:root{
  --accent:#0b5ed7;    /* primary accent color */
  --muted:#666;
  --border:#bdbdbd;
  --bg:#fff;
  --dept-note-height:56px;
  --header-text:#2f3a44; /* darker grey for header text */
  --locked:#f5f7fa;      /* non-admin locked bg */
}

/* Basic layout */
*{box-sizing:border-box;font-family:Arial, Helvetica, sans-serif}
body{margin:16px;background:#f4f6f8;color:#111}
.container{max-width:1400px;margin:0 auto;background:var(--bg);padding:18px;border:1px solid #ddd}
.top{display:flex;justify-content:space-between;align-items:flex-start;border-bottom:2px solid #ddd;padding-bottom:10px;margin-bottom:12px}
.brand h1{margin:0;font-size:16px;letter-spacing:0.6px}
.brand h2{margin:2px 0 0;font-size:12px;color:var(--muted)}
.meta{display:flex;flex-direction:column;gap:6px;text-align:right}
.meta-box{display:inline-block;padding:6px 10px;border:1px solid var(--border);background:#fafafa;margin-left:6px}

/* doc info */
.doc-info{display:flex;justify-content:flex-start;padding:8px 0}
.doc-info .left{width:100%}
.doc-info label{font-weight:600;margin-right:6px}

/* actions above table */
.table-actions{display:flex;align-items:center;gap:10px;margin:8px 0;flex-wrap:wrap}
.table-actions button{padding:6px 10px}

/* table */
.table-wrap{overflow:auto;margin-top:6px;border:1px solid var(--border);background:#fff}
table{border-collapse:collapse;width:100%;min-width:1200px}
th,td{border:1px solid var(--border);padding:6px;font-size:12px;vertical-align:middle}
th{background:#f2f4f7;font-weight:700;text-align:center;color:var(--header-text)}
.group{background:#e9eefb}
.narrow{width:68px}
.fixed{width:60px;text-align:center}
.small{width:60px}
.editable{min-width:140px;outline:none;white-space:pre-wrap}
.singleline{white-space:nowrap}
.bordered{border:1px solid #d0d7de;padding:6px;background:#fff;border-radius:2px}
.cycle{cursor:pointer;text-align:center;user-select:none;background:#fff;min-width:40px;white-space:nowrap}
.cycle:hover{background:#f8f9fc}
.cycle.state-yes{color:green;font-weight:700}
.cycle.state-no{color:#c42b2b;font-weight:700}
.cycle.state-na{color:#666;font-weight:700}

/* dept-note */
.dept-note{min-height:var(--dept-note-height);max-width:320px; cursor: pointer}
.dept-note:focus{outline:2px solid rgba(11,94,215,0.18); box-shadow: none}

/* actions */
.actions-col{width:90px}
.row-actions{padding:6px;text-align:center}
.row-actions .del-row{padding:4px 8px;border:1px solid #d0d7de;background:#fff;border-radius:3px;cursor:pointer}
.row-actions .del-row:hover{background:#f8f8f8}

/* ========== Header styling for PED groups (new) ========== */
/* Large group headings (the two wide headings above the sub-headers) */
.group-heading {
  text-align: center;
  color: var(--accent);              /* accent color for the group heading text */
  background: #eef5ff;               /* subtle pale background to set them apart */
  font-size: 13px;
  padding: 10px 6px;
  border-left: 1px solid var(--border);
  border-right: 1px solid var(--border);
  vertical-align: middle;
  letter-spacing: 0.2px;
}

/* If you want a slightly darker accent for dept group, you can use this */
.group-heading.dept { color: var(--accent); }

/* Sub-group row (Engineering / Manufacturing / Materials / Purchase)
   keep center aligned and slightly bolder */
.table-wrap thead tr:nth-child(2) th {
  text-align:center;
  font-size:13px;
  color:var(--header-text);
  background:#f7f9fb;
}

/* Detailed labels row (third row of the header) â€” center & wrap nicely */
.table-wrap thead tr:nth-child(3) th {
  text-align:center;
  font-size:12px;
  color:var(--header-text);
  padding:8px;
  line-height:1.15;
  white-space:normal;
}

/* Make the per-column dept-note titles (3rd header row last 7 th) visually match */
.table-wrap thead tr:nth-child(3) th:last-child,
.table-wrap thead tr:nth-child(3) th:nth-last-child(2),
.table-wrap thead tr:nth-child(3) th:nth-last-child(3),
.table-wrap thead tr:nth-child(3) th:nth-last-child(4),
.table-wrap thead tr:nth-child(3) th:nth-last-child(5),
.table-wrap thead tr:nth-child(3) th:nth-last-child(6),
.table-wrap thead tr:nth-child(3) th:nth-last-child(7) {
  background:#f6f7f9;
  color:var(--header-text);
  font-weight:700;
}

/* Small adjustment to make headers centered vertically when multi-line */
.table-wrap thead th { vertical-align: middle; }

/* ========== Sign-board (unchanged) ========== */
.signboard-wrap{overflow:auto;margin-top:12px;border:1px solid var(--border);background:#fff;border-radius:4px;padding:8px}
.signboard-table{border-collapse:collapse;width:100%;min-width:1200px}
.signboard-table th, .signboard-table td{border:1px solid #e6e9ed;padding:8px;vertical-align:top}
.signboard-table thead th{background:#f2f4f7;font-weight:700;text-align:center}
.signboard-table tbody .sig-line-row td{height:56px;padding-top:14px;padding-bottom:14px}
.signboard-table tbody .sig-line{height:18px;border-bottom:1px solid #000;margin:0 auto 2px;width:90%}
.signboard-table tbody .sig-name-row td{padding:8px 10px}
.sig-label{font-size:12px;color:#333;font-weight:600;margin-bottom:6px}
.sig-name{font-size:12px;color:#333}
.sig-name span[contenteditable]{display:block;min-height:16px;outline:none}

/* amendment */
.amend{margin-top:12px;font-size:12px}
.note{padding:8px;border:1px dashed #ccc;background:#fbfbfb;min-height:60px}

/* Collapsible Amendment Details */
.note.collapsible{
  cursor:pointer;
  position:relative;
  transition:all 0.3s ease;
}
.note.collapsible.collapsed{
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  min-height:auto;
}
.note.collapsible.expanded{
  white-space:normal;
}
.note.collapsible:hover{
  background:#f0f0f0;
  border-color:#aaa;
}
.note.collapsible::after{
  content:' [Click to expand]';
  font-size:10px;
  color:#666;
  font-style:italic;
  margin-left:8px;
}
.note.collapsible.expanded::after{
  content:' [Click to collapse]';
}

/* focus for contenteditable */
[contenteditable].bordered:focus{box-shadow:inset 0 0 0 2px rgba(11,94,215,0.06);outline:none}

/* ===== Admin locking visuals (match JS enforcement) ===== */
.locked-edit{
  background:var(--locked) !important;
  cursor:not-allowed !important;
  opacity:0.9;
  -webkit-user-select:none; user-select:none;
}
td.cycle[data-locked="1"],
td.dept-note[data-locked="1"]{
  pointer-events:none !important;
  opacity:0.5 !important;
}

/* Disabled header fields in doc-info (Customer/BID/PO/CR) for non-admin */
.doc-info input:disabled,
.doc-info select:disabled,
.fields-grid .field-input:disabled,
.fields-grid .field-select:disabled{
  background:var(--locked);
  color:#6b7280;
  cursor:not-allowed;
}

/* responsive / print adjustments */
@media print{
  body{background:#fff}
  .container{border:0;box-shadow:none;padding:0}
  .table-actions, .meta{display:none}
  .signboard-wrap{overflow:visible}
  table{page-break-after:auto}
  tr{page-break-inside:avoid;page-break-after:auto}
}